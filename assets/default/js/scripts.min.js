"use strict";function insertAtCaret(e,t){var n=document.getElementById(e),i=n.scrollTop,o=0,a=n.selectionStart||"0"==n.selectionStart?"ff":document.selection?"ie":!1;if("ie"==a){n.focus();var c=document.selection.createRange();c.moveStart("character",-n.value.length),o=c.text.length}else"ff"==a&&(o=n.selectionStart);var l=n.value.substring(0,o),r=n.value.substring(o,n.value.length);if(n.value=l+t+r,o+=t.length,"ie"==a){n.focus();var c=document.selection.createRange();c.moveStart("character",-n.value.length),c.moveStart("character",o),c.moveEnd("character",0),c.select()}else"ff"==a&&(n.selectionStart=o,n.selectionEnd=o,n.focus());n.scrollTop=i}function inject_email_template(e,t){$.each(t,function(t,n){t=t.replace("email_template_",""),n&&e.indexOf(t)>-1&&$("#"+t).val(n)})}$(document).ready(function(){$(".dropdown-toggle").click(function(e){var t=$(this).next(".dropdown-menu"),n=e.pageX+20,i=e.pageY+20,o=t.width(),a=t.height(),c=$(window).width()-(n+o),l=$(window).height()-(i+a);20>l&&t.css({top:"auto",bottom:"100%"})}),$("html").click(function(){$(".dropdown-menu:visible").not(".datepicker").removeAttr("style")});var e;$(".text-tag").bind("click",function(){var t=this.getAttribute("data-tag");return insertAtCaret(e.id,t),!1}),$(".taggable").on("focus",function(){e=this}),$(window).resize()}),$(window).resize(function(){var e=document,t=Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight));$(".sidebar").height(t)});