"use strict";function insertAtCaret(t,e){var n=document.getElementById(t),a=n.scrollTop,c=0,o=n.selectionStart||"0"==n.selectionStart?"ff":document.selection?"ie":!1;if("ie"==o){n.focus();var i=document.selection.createRange();i.moveStart("character",-n.value.length),c=i.text.length}else"ff"==o&&(c=n.selectionStart);var r=n.value.substring(0,c),l=n.value.substring(c,n.value.length);if(n.value=r+e+l,c+=e.length,"ie"==o){n.focus();var i=document.selection.createRange();i.moveStart("character",-n.value.length),i.moveStart("character",c),i.moveEnd("character",0),i.select()}else"ff"==o&&(n.selectionStart=c,n.selectionEnd=c,n.focus());n.scrollTop=a}function inject_email_template(t,e){$.each(e,function(e,n){e=e.replace("email_template_",""),n&&t.indexOf(e)>-1&&$("#"+e).val(n)})}$(document).ready(function(){$(".dropdown-toggle").click(function(t){var e=$(this).next(".dropdown-menu"),n=t.pageX+20,a=t.pageY+20,c=e.width(),o=e.height(),i=$(window).width()-(n+c),r=$(window).height()-(a+o);20>r&&e.css({top:"auto",bottom:"100%"})}),$("html").click(function(){$(".dropdown-menu:visible").not(".datepicker").removeAttr("style")});var t;$(".text-tag").bind("click",function(){var e=this.getAttribute("data-tag");return insertAtCaret(t.id,e),!1}),$(".taggable").on("focus",function(){t=this})});